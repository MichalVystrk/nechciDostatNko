<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Literární žánry</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .container,
        #stats {
            background-color: #1e1e1e;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            max-width: 90%;
            width: 360px;
            margin-bottom: 20px;
            text-align: center;
        }

        h1,
        h2 {
            color: #FFEB3B;
        }

        input,
        button {
            width: 100%;
            max-width: 320px;
            padding: 12px;
            margin-top: 10px;
            border-radius: 8px;
            font-size: 16px;
            border: none;
        }

        input {
            background-color: #333;
            color: #e0e0e0;
        }

        button {
            background-color: #FFEB3B;
            color: #121212;
            cursor: pointer;
        }

        button:hover {
            background-color: #FFCA28;
        }

        .correct {
            color: #4CAF50;
            font-weight: bold;
        }

        .incorrect {
            color: #F44336;
            font-weight: bold;
        }

        ul li {
            margin-bottom: 10px;
        }

        table {
            width: 100%;
            margin-top: 10px;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 8px;
            text-align: center;
            border: 1px solid #333;
        }

        #answersList ul {
            list-style-type: none;
            padding: 0;
        }

        #fact ul {
            list-style-type: none;
            padding-left: 0;
        }

        /* --- Přidáno pro rozsah směrů --- */
        .range-container {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 40px;
            width: 360px;
            max-width: 90%;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 20px;
        }

        .range-container label {
            margin-top: 10px;
            margin-bottom: 5px;
            color: #FFEB3B;
        }

        .range-container input[type="number"] {
            width: 100%;
            max-width: 320px;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 16px;
            border-radius: 8px;
            border: 2px solid #333;
            background-color: #333;
            color: #e0e0e0;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .range-container input[type="number"]:focus {
            border-color: #FFEB3B;
        }

        .range-container button {
            width: 100%;
            max-width: 320px;
            padding: 15px;
            font-size: 18px;
            cursor: pointer;
            background-color: #FFEB3B;
            color: #121212;
            border: none;
            border-radius: 8px;
            margin-top: 10px;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .range-container button:hover {
            background-color: #FFCA28;
        }

        .range-container button:active {
            background-color: #FFB300;
            box-shadow: none;
        }

        /* --- konec přidaného CSS --- */

        /* --- Přidáno pro layout vedle sebe --- */
        .layout-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }

        @media (max-width: 768px) {
            body {
                height: auto;
                min-height: 100vh;
                overflow-x: hidden;
            }

            .layout-container {
                flex-direction: column;
                align-items: center;
                width: 100vw;
                min-width: 0;
                padding: 0 5vw;
                box-sizing: border-box;
            }

            .container,
            #stats,
            .range-container {
                width: 100%;
                min-width: 0;
                margin-bottom: 20px;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .range-container {
                margin-top: 0;
                margin-bottom: 20px;
                position: relative;
                z-index: 2;
            }
        }

        /* --- konec přidaného CSS --- */

        #directionInput {
            display: block;
            margin: 0 auto 20px auto;
            width: 220px;
            max-width: 90%;
            text-align: center;
        }

        .back-button {
            position: fixed;
            left: 20px;
            bottom: 20px;
            background-color: #FFEB3B;
            color: #121212;
            padding: 15px 24px;
            font-size: 18px;
            font-weight: bolder;
            border-radius: 8px;
            text-decoration: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
            z-index: 100;
        }

        .back-button:hover {
            background-color: #FFCA28;
        }

        .back-button:active {
            background-color: #FFB300;
            box-shadow: none;
        }
    </style>
</head>

<body>
    <div class="layout-container">
        <!-- Přidáno: Nastavení rozsahu -->
        <div class="range-container">
            <h2>Nastavení rozsahu</h2>
            <label for="startRange">Začátek rozsahu:</label>
            <input type="number" id="startRange" min="1" max="26" value="1" />
            <span id="startName" style="color:#FFEB3B;font-weight:bold;display:block;margin-bottom:10px;"></span>
            <label for="endRange">Konec rozsahu (max: <span id="maxDirections"></span>):</label>
            <input type="number" id="endRange" min="1" max="26" value="26" />
            <span id="endName" style="color:#FFEB3B;font-weight:bold;display:block;margin-bottom:10px;"></span>
            <button onclick="setDirectionRange()">Nastavit rozsah</button>
            <label for="factCount" style="margin-top:30px;">Počet odrážek:</label>
            <input type="number" id="factCount" min="1" max="10" value="2" style="width:80px; margin-bottom:10px;" />
        </div>

        <div class="container">
            <h1>Test</h1>
            <p id="fact"></p>
            <input type="text" id="directionInput" placeholder="Womp Womp" onkeydown="checkEnter(event)">
            <button onclick="checkAnswer()">Zkontrolovat</button>
            <p id="result"></p>
        </div>

        <div id="stats">
            <h2>Statistiky</h2>
            <table>
                <tr>
                    <th>Správně</th>
                    <th>Špatně</th>
                </tr>
                <tr>
                    <td id="correctCount">0</td>
                    <td id="incorrectCount">0</td>
                </tr>
            </table>
            <div id="answersList">
                <p><strong>Seznam správných odpovědí:</strong></p>
                <ul id="correctAnswersList"></ul>
            </div>
        </div>
    </div>
    <a href="../index.html" class="back-button">Zpět na úvod</a>
    <script>
        function normalizeString(str) {
            return str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        }
        const directions = [
            {
                name: "Anekdota",
                facts: [
                    "krátké vyprávění humorné příhody",
                    "většinou jen v ústní formě",
                    "zesměšňuje známou osobnost, událost, rasu, národ, skupinu",
                    "anekdoty erotické, lékařské, politické, židovské",
                    "v širším významu jiný název pro vtip"
                ]
            },
            {
                name: "Bajka",
                facts: [
                    "veršované nebo prozaické vypravování alegorického (skrytý význam) příběhu s cílem mravně poučit",
                    "místo lidí v bajce většinou vystupují zvířata",
                    "některá zvířata mají ustálené vlastnosti (osel-hloupý)",
                    "autoři: Ezop, Jean de La Fontaine, Ivan Andrejevič Krylov"
                ]
            },
            {
                name: "Balada",
                facts: [
                    "epická (dějová) báseň s lyrickými prvky (popisy přírody, nálady)",
                    "ponurý děj obvykle končí špatně",
                    "u sociální balady vychází tragika z chudoby",
                    "autoři: Jan Neruda, Petr Bezruč, Jiří Wolker"
                ]
            },
            {
                name: "Cestopis",
                facts: [
                    "tématem je popis nebo líčení autorovy cesty do cizí země",
                    "představují se zeměpisné, národnostní, kulturní, sociální zajímavosti",
                    "některé řadíme k publicistickému, jiné k uměleckému funkčnímu stylu"
                ]
            },
            {
                name: "Elegie",
                facts: [
                    "smutně laděný lyrický útvar",
                    "nejčastějšími motivy jsou žal nad ztrátou blízkého, bolest ze zklamané lásky",
                    "útvar vznikl ve starověkém Řecku"
                ]
            },
            {
                name: "Epigram",
                facts: [
                    "krátká satirická báseň s vtipnou pointou",
                    "nejčastěji kritizuje společnost",
                    "v českém prostředí nejvýrazněji spojen s tvorbou Karla Havlíčka Borovského",
                    "Není nad původnost, každý po ní touží, lidé chodí přes most, to já půjdu louží. Co sám nerad, nečiň jinému! žáku pravil kantor kdesi, třepaje ho za pačesy"

                ]
            },
            {
                name: "Epos",
                facts: [
                    "rozsáhlý epický útvar, často veršovaný",
                    "s jedním ústředním hrdinou, který zažívá mnohá dobrodružství",
                    "rozdělení: hrdinský, rytířský, historický, duchovní, idylický",
                    "nejznámější eposy: Epos o Gilgamešovi, Ilias, Odyssea, Alexandreida, Tristan a Izolda, Kalevala, Beowulf, Edda, Píseň o Rolandovi"
                ]
            },
            {
                name: "Fantasy",
                facts: [
                    "literární díla, která se odehrávají ve vymyšleném (nereálném) světě",
                    "oproti sci-fi, pro kterou je typická budoucnost, se fantasy odehrává v minulosti",
                    "nejvýznamnější představitelé: J.R. R. Tolkiena, R. E. Howard"
                ]
            },
            {
                name: "Kaligram",
                facts: [
                    "báseň, ve které je text upraven tak, aby tvořil nějaký obraz, který odpovídá obsahu",
                ]
            },
            {
                name: "Komedie",
                facts: [
                    "jeden ze základních dramatických žánrů",
                    "konflikty, děj i postavy jsou líčeny s nadsázkou (směšně)",
                    "měla by končit smírem",
                    "hlavní představitelé: Aristofanes, T. M. Plautus, W. Shakespeare, C. Goldoni, V. Burian, Voskovec a Werich, V. Vorlíček"
                ]
            },
            {
                name: "Kronika",
                facts: [
                    "ve středověku veršovaný, ale dnes prozaický útvar",
                    "zaznamenává historické události v chronologickém sledu",
                    "většinou zachycuje větší časové úseky",
                    "nejvýznamnější české kroniky: Kosmova Kronika česká, Dalimilova kronika, Kronika česká Václava Hájka z Libočan"
                ]
            },
            {
                name: "Legenda",
                facts: [
                    "veršovaná nebo prozaická epická skladba",
                    "nejčastěji životopis svatých",
                    "patří k náboženské literatuře",
                    "nejznámější „čeští“ svatí: Václav, Ludmila, Anežka, Prokop, Cyril a Metoděj, Vojtěch, Jan z Nepomuku, Vintíř"
                ]
            },
            {
                name: "Mýtus",
                facts: [
                    "možno chápat jako synonymum pro slovo báje",
                    "nejčastější náplní je vznik světa, bohů a člověka, vysvětlují se přírodní procesy",
                    "Staré řecké báje a pověsti, biblické mýty"
                ]
            },
            {
                name: "Novela",
                facts: [
                    "epický žánr krátkého rozsahu zachycující jeden děj s omezeným počtem osob",
                    "neobjevují se epizodické (vedlejší) děje",
                    "často s výraznou pointou",
                    "ještě kratší než povídka",
                    "za zakladatele považován G. Boccaccio a jeho Dekameron",
                    "příklad: V. Dyk -  Krysař"
                ]
            },
            {
                name: "Óda",
                facts: [
                    "lyrický útvar oslavného charakteru",
                    "nejčastější náplní je oslava kladné abstraktní vlastnosti nebo citu (přátelství, láska, radost, hrdinství)",
                    "např.: Óda na radost"
                ]
            },
            {
                name: "Pásmo",
                facts: [
                    "polytematická báseň (má mnoho témat)",
                    "delšího rozsahu",
                    "charakteristická asociativním řazením témat",
                    "nejznámější pásma: Apollinaire – Pásmo, J. Wolker – Svatý Kopeček, V. Nezval - Edison"
                ]
            },
            {
                name: "Píseň",
                facts: [
                    "poezie spojená s hudbou, většinou rýmovaná",
                    "rozdělujeme na verše a sloky, často využívá refrénu",
                    "rozdělení: 1) podle vzniku: a) lidové b) umělé, 2) podle tématiky: a) duchovní b)světské c) vlastenecké d) milostné e) pijácké f) církevní"
                ]
            },
            {
                name: "Poema",
                facts: [
                    "rozsáhlá básnická skladba epického charakteru",
                    "nejčastěji se týká jednoho tématu nebo postavy",
                    "nejvíce užívaná v ruské literatuře"
                ]
            },
            {
                name: "Pohádka",
                facts: [
                    "původně žánr lidové slovesnosti s nadpřirozenými jevy",
                    "bez udání konkrétního času a prostoru",
                    "vystupují jednoznačné osoby (dobří, zlí)",
                    "nadpřirozené bytosti",
                    "bojuje dobro se zlem a zlo je poraženo",
                    "rozdělení: lidové, umělé"
                ]
            },
            {
                name: "Pověst",
                facts: [
                    "řadí se k ústní lidové slovesnosti",
                    "často byly vypravěči upravovány",
                    "budí zdání věrohodnosti (postavy mají jména a vztahují se k určité lokalitě)",
                    "často jsou spojeny s nadpřirozenými jevy",
                    "rozdělení: a) pověsti místní b) pověsti historické c) pověsti erbovní a rodové",
                    "Staré pověsti české A. Jiráska"
                ]
            },
            {
                name: "Povídka",
                facts: [
                    "kratší prozaický útvar",
                    "delší než novela (jen jeden děj) a kratší než román (mnoho dějů za delší časový úsek)",
                    "rozdělení: a) psychologická b) humorná c) autobiografická d) detektivní e) vědecko-fantastická",
                    "nejvýznamnější autoři: Božena Němcová, Jan Neruda, J. Hašek, Karel Čapek, N. V. Gogol, F. S. Fitzgerald, E. Hemingway"
                ]
            },
            {
                name: "Román",
                facts: [
                    "rozsáhlý epický útvar",
                    "hlavní děj doplňují časté vedlejší děje",
                    "vystupuje mnoho postav",
                    "zachycuje se delší časový úsek (často celý život)",
                    "nejpoužívanější útvar realismu",
                    "rozdělení: a) rytířský román b) historický román c) dobrodružný román d) humoristický román e) satirický román f) psychologický román g) válečný román h) filosofický román",
                    "nejvýznamnější představitelé:  H. de Balzac, F. M. Dostojevský, L. N. Tolstoj"
                ]
            },
            {
                name: "Sci-fi",
                facts: [
                    "science fiction",
                    "vědecko-fantastický román",
                    "tematicky čerpá z poznatků moderní vědy a techniky",
                    "autor pracuje s neexistujícími, ale hypoteticky možnými technickými vynálezy",
                    "odehrává se většinou v budoucnosti",
                    "představitelé: R. Bradbury, A. C. Clarke, L. Souček"
                ]
            },
            {
                name: "Sonet",
                facts: [
                    "útvar lyrické poezie",
                    "nejčastěji s milostnou tematikou",
                    "typický útvar pro renesanci",
                    "nejvýznamnější představitelé: F. Petrarca, W. Shakespeare, 4 sloky o 4-4-3-3 verších"
                ]
            },
            {
                name: "Romance",
                facts: [
                    "lyricko-epická báseň",
                    "nejčastěji milostná tematika",
                    "většinou rozvíjí jednu zápletku většího epického útvaru (hrdinský epos)",
                    "celkové vyznění skladby je optimistické"
                ]
            },
            {
                name: "Tragédie",
                facts: [
                    "jeden ze základních dramatických žánrů",
                    "hlavní zápletka dnešní tragédie vychází ze střetu člověka s člověkem nebo společností",
                    "pro antickou tragédii byl typický střet člověka s osudem",
                    "vážný obsah",
                    "pochmurný děj",
                    "hlavní hrdina často umírá",
                    "vznikla v antickém Řecku z oslav boha Dionýsa",
                    "představitelé: Sofokles, Shakespeare, Mrštíkové, G. Preissová"
                ]
            }
        ];


        let currentDirection = null;
        let correctCount = 0;
        let incorrectCount = 0;
        let selectedDirections = directions; // Výchozí seznam směrů
        let previousDirectionsQueue = []; // Fronta pro sledování předchozích směrů
        let factCount = 2;

        // Přidáno: Nastavení rozsahu směrů
        function setDirectionRange() {
            const start = parseInt(document.getElementById("startRange").value, 10);
            const end = parseInt(document.getElementById("endRange").value, 10);

            if (start >= 1 && end <= directions.length && start < end) {
                selectedDirections = directions.slice(start - 1, end);
                currentDirection = getNextDirection();
                displayDirectionInfo(currentDirection);
            } else if (start === end) {
                alert("Začátek a konec rozsahu se nesmí rovnat!");
            } else {
                alert("Zadejte platný rozsah!");
            }
        }

        function updateRangeNames() {
            const start = parseInt(document.getElementById("startRange").value, 10);
            const end = parseInt(document.getElementById("endRange").value, 10);
            const startName = (directions[start-1] && directions[start-1].name) ? directions[start-1].name : "";
            const endName = (directions[end-1] && directions[end-1].name) ? directions[end-1].name : "";
            document.getElementById("startName").textContent = startName ? `${startName}` : "";
            document.getElementById("endName").textContent = endName ? `${endName}` : "";
        }
        document.getElementById("startRange").addEventListener("input", updateRangeNames);
        document.getElementById("endRange").addEventListener("input", updateRangeNames);
        document.addEventListener("DOMContentLoaded", function () {
            document.getElementById("maxDirections").textContent = directions.length;
            updateRangeNames();
        });

        function getNextDirection() {
            const maxQueueLength = Math.ceil(selectedDirections.length / 2); // Dynamická délka fronty
            let dir;
            do {
                dir = selectedDirections[Math.floor(Math.random() * selectedDirections.length)];
            } while (previousDirectionsQueue.includes(dir) && selectedDirections.length > 4);

            // Přidáme směr do fronty a udržujeme maximální délku
            previousDirectionsQueue.push(dir);
            if (previousDirectionsQueue.length > maxQueueLength) {
                previousDirectionsQueue.shift(); // Odstraní nejstarší směr z fronty
            }

            return dir;
        }

        function getRandomFacts(facts, count) {
            const shuffled = facts.slice().sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        document.getElementById("factCount").addEventListener("input", function (e) {
            let val = parseInt(e.target.value, 10);
            if (val >= 1 && val <= 10) {
                factCount = val;
                displayDirectionInfo(currentDirection);
            }
        });

        function displayDirectionInfo(dir) {
            const factElement = document.getElementById("fact");
            factElement.innerHTML = "";
            const factList = document.createElement("ul");
            const randomFacts = getRandomFacts(dir.facts, factCount);
            randomFacts.forEach(fact => {
                const listItem = document.createElement("li");
                listItem.textContent = fact;
                factList.appendChild(listItem);
            });
            if (dir.mainWorks) {
                const mainWorksItem = document.createElement("li");
                mainWorksItem.textContent = dir.mainWorks;
                factList.appendChild(mainWorksItem);
            }
            factElement.appendChild(factList);
        }

        function checkAnswer() {
            const userAnswer = normalizeString(document.getElementById("directionInput").value.trim());
            const correctAnswer = normalizeString(currentDirection.name);
            const alternativeAnswer = normalizeString(currentDirection.name.split(" (")[0]); // Jméno bez závorky
            const result = document.getElementById("result");

            if (userAnswer === correctAnswer || userAnswer === alternativeAnswer) {
                result.textContent = "Správně!";
                result.className = "correct";
                correctCount++;
                document.getElementById("correctCount").textContent = correctCount;

                // --- Změna: přidání/aktualizace počtu správných odpovědí ---
                const correctList = document.getElementById("correctAnswersList");
                let found = false;
                for (let li of correctList.children) {
                    if (li.dataset.name === currentDirection.name) {
                        let count = parseInt(li.dataset.count, 10) + 1;
                        li.dataset.count = count;
                        li.textContent = `${currentDirection.name} (${count}×)`;
                        found = true;
                        break;
                    }
                }
                if (!found) {
                    const listItem = document.createElement("li");
                    listItem.textContent = `${currentDirection.name} (1×)`;
                    listItem.dataset.name = currentDirection.name;
                    listItem.dataset.count = "1";
                    correctList.appendChild(listItem);
                }
                // --- konec změny ---
            } else {
                result.textContent = `Špatně! Správná odpověď: ${currentDirection.name}`;
                result.className = "incorrect";
                incorrectCount++;
                document.getElementById("incorrectCount").textContent = incorrectCount;
            }

            document.getElementById("directionInput").value = "";
            currentDirection = getNextDirection();
            displayDirectionInfo(currentDirection);
        }

        function checkEnter(e) {
            if (e.key === "Enter") checkAnswer();
        }

        // Načtení první otázky
        currentDirection = getNextDirection();
        displayDirectionInfo(currentDirection);
    </script>
</body>

</html>